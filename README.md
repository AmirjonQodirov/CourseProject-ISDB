# Курсовой проект по предмету Информационные системы и базы данных

### Предметная область "Производство и продажа колбасных изделий"

Представим, что нам нужно проследить путь колбасных изделий начиная от цеха по 
производству до прилавок магазинов и разных мясных лавок. 
Что из себя представляет наша предметная область: Есть много цехов где производят 
разные колбасные изделия у каждого цеха разный список продукции и каждый цех имеет 
свои фермы на разных городах и странах. В этих фермах есть разные животные включая 
экзотических животных. В зависимости от страны и города в фермах будут разводится 
разные животные включая экзотических которые доступны только в этой местности. У 
каждого цеха имеется склад в которых хранятся готовые изделия в течение 5 суток. У 
каждого цеха есть специальные люди (сотрудники цеха) которые будут поставлять разные 
колбасные изделия клиентам, под клиентами подразумевается продавец в магазине или в мясной лавке или еще где ни будь. Есть специальные лавки где продаются только 
экзотическая продукция цеха. У каждого цеха будет свой график, в зависимости от 
графика будут поставляться колбасные изделия.  Сотрудник одновременно может быть 
сотрудников нескольких цехов. В зависимости от груза (колбасных изделий) каждому 
сотруднику будет предоставлена специальная машина для перевозки груза. Город 
разделен на участки, каждый сотрудник может поставлять колбасные изделия только на 
своих участках. Продавцы могут иметь несколько поставщиков из разных цехов. Бывают 
такие случаи, когда колбасные изделия могут иметь дефекты и в этом случае продавец 
может обратно возвратить эти товары поставщикам, и поставщики в свою очередь 
цеху.  Клиент не всегда платежа способен, и поставщики чтобы не потерять клиентов 
могут отдать в долг товары. Клиенты могут сделать специальные заказы которые будут 
обрабатываться отдельно. Для сотрудников цехов и постоянных клиентов будут 
предоставлены скидки и льготные услуги на продукцию. Есть каталог подписок для 
клиентов в зависимости от подписки клиент может составить список продукции, которых 
может заказать. Для VIP клиентов у нас будет VIP подписки заказы которых будут 
обрабатываться отдельно.

### Даталогическая Модель базы данных 
![модель базы данных](https://github.com/MansurovB-source/CourseProject-ISDB/blob/main/data-model/courcseworDM.png

### Описание основных прецедентов

### Функции:
* `get_workers()` - функция позволяет получить всех своих поставщиков.
* `get_clients_for_provider(id_provider integer)` - функция позволяет получить всех клиентов определенного поставщики.
* `get_client_for_factory` - функция позволяет получить всех клиентов определенного цеха.

### Триггеры:
* `inc_DelClientNum` - триггер срабатывающий при добавление нового клиента автоматически инкрементирует счетчик клиентов в delivery_places. 
* `dec_DelClientNum` - декремент.
* `inc_WorkerNum` - триггер срабатывающий при добавление нового поставщика автоматически инкрементирует счетчик поставщиков цеха в котором работает.
* `dec_WorkerNum` - декремент.
* `make_Schedule` - триггер срабатывает при попытке сделать заказ. 
1. Есть ли на складе требуемый продукт если есть изменяеть состояние склада а если нет то заказ отменяется.
2. Заказ добавляется в расписание заказов если был принят.
* `payment` - триггер срабатывает после принятие заказа и добавляет запись в таблицу client_payments и provider_payments.
* `client_pay` - триггер срабатывает когда клиент будет оплачивать товар он изменяет таблицу client_payments заполняет поля которые не касаются клиента.
* `provider_pay` - триггер срабатывает когда поставщик будет возвращать деньги полученные от клиента цеху.
* `return_client` - триггер срабатывает когда клиент захочеть возвратить товар. Триггер заполняет нужные поля и выбирает поставщика на имя которого будет записан возврат.
* `return_provider` - триггер срабатывает когда поставщик захочеть возвратить возврат полученный от клиента  
### Индексы: